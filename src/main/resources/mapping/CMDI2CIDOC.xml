<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE doc [
	<!ENTITY objectProperties SYSTEM "object.xml">
	<!ENTITY datasetProperties SYSTEM "dataset.xml">
	<!ENTITY teiProperties SYSTEM "tei.xml">
]>
<mappings>

	<!-- Header -->
	
	<entity xpath="/cmd:CMD" type="crmpe:PE22_Persistent_Dataset"
		hasType="metadata">


		<link>
			<entity relationship="crmdig:L11i_was_output_of" type="crmdig:D7_Digital_Machine_Event" />
			<pattern>cmd:Header</pattern>
		</link>

		

		<link>
			<entity relationship="crmpe:PP39_is_metadata_for" type="crmpe:PE24_Volatile_Dataset"
				var="data1" />
			<entity relationship="crmpe:PP8i_is_dataset_hosted_by" type="crmpe:PE15_Data_E-Service" />
			<pattern>cmd:Resources/cmd:ResourceProxyList/cmd:ResourceProxy</pattern>
		</link>
		<link>
			<entity relationship="crmpe:PP39_is_metadata_for" type="crmpe:PE24_Volatile_Dataset"
				var="data1" />
			<entity relationship="crmpe:PP50_accessible_at" type="crmpe:PE29_Access_point" />
			<pattern>cmd:Resources/cmd:ResourceProxyList/cmd:ResourceProxy/cmd:ResourceRef</pattern>
		</link>

		<link>

		
			<!-- Only one of these entities will be mapped -->

			<!-- Dataset condition="dataset" -->
			<entity xpath="/cmd:CMD/cmd:Components/?profileRoot"
				relationship="crmpe:PP39_is_metadata_for" type="crmpe:PE24_Volatile_Dataset"
				var="data1" condition="dataset">
				 &objectProperties; 
				 &datasetProperties; 
			</entity>


			


			<!-- Service -->
			<entity xpath="/cmd:CMD/cmd:Components/?profileRoot?"
				relationship="crm:P129_is_about" type="crmpe:PE8_E-Service" entiVar="mainEntity"
				condition="service">
				&objectProperties;
			</entity>

			<!-- Software -->

			<pattern>cmd:Components/?profileRoot</pattern>

		</link>


	</entity>


	<entity xpath="/cmd:CMD/cmd:Header" type="crmdig:D7_Digital_Machine_Event">


		<link>
			<entity relationship="crm:P4_has_time_span" type="crm:E52_Time-Span" />
			<entity relationship="crm:P82_at_some_time_within" type="rdf-schema#Literal" />
			<pattern>cmd:MdCreationDate</pattern>
		</link>

		<link>
			<entity relationship="crmdig:L23_used_software_or_firmware"
				type="crmpe:PE21_Persistent_Software" />
			<pattern>cmd:MdCreator</pattern>
		</link>

		<link>
			<entity relationship="crmdig:L23_used_software_or_firmware"
				type="crmpe:PE38_Schema" hasType="cmdi-profile" />
			<pattern>cmd:MdProfile</pattern>
		</link>

	</entity>






</mappings>
